(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/musicPlay/musicPlay"],{"00cb":function(t,e,n){"use strict";n.r(e);var i=n("9a75"),s=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=s.a},"4e27":function(t,e,n){"use strict";var i=n("e005"),s=n.n(i);s.a},"595c":function(t,e,n){"use strict";(function(t){n("4605");i(n("66fd"));var e=i(n("a820"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"9a75":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){n.e("pages/musicPlay/children/related").then(function(){return resolve(n("71e5"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("pages/musicPlay/children/comments").then(function(){return resolve(n("d263"))}.bind(null,n)).catch(n.oe)},r={data:function(){return{musicItem:null,audioObj:null,palyStatus:"play",lrc:"",itemId:"scroll-0",storelrcContent:[],storeMarginTop:0,currentIndex:0,offset:1}},components:{related:i,comments:s},onLoad:function(){var t=this.$store.getters.getMusic,e=this.$store.getters.getmusicId;e&&t.musicId===e?(this.musicItem=t,this.palyStatus=this.$store.getters.getplayStatus,this.audioObj=this.$store.getters.getAudio,this.getDesc(e),this.cureentTime(this.audioObj)):(this.audioObj&&this.audioObj.stop(),this.musicItem=t,this.getMusicSrc(t.musicId))},computed:{setbg:function(){return this.musicItem&&this.musicItem.alpicUrl?"background-image:url("+this.musicItem.alpicUrl+")":""},getPlyStatus:function(){return"play"===this.palyStatus?"&#xe615;":"&#xe79f;"},getMusicId:function(){return this.$store.getters.getMusic.musicId}},watch:{storelrcContent:function(t){this.itemId="scroll-00-00-00"}},methods:{disposeId:function(t){return"scroll-"+String(t[0]).replace(".","-")},audios:function(e,n){var i=this,s=t.getBackgroundAudioManager();this.audioObj=s,s.src=e;var r=this.musicItem,c=r.musicName,o=r.alName,u=r.arName,a=r.alpicUrl,l=r.musicId;s.title=c,s.epname=o,s.singer=u,s.coverImgUrl=a,this.$store.commit("SET-PlayStatus","stop"),this.$store.commit("SET-MUSICID",l),this.$store.commit("SET-AUdio",s),s.onCanplay((function(t){i.palyStatus="stop",s.play();try{i.getDesc(n)}catch(e){i.lrc="暂时没有歌词噢"}})),s.onError((function(){t.showToast({title:"播放失败",icon:"none"}),i.palyStatus="play",s.pause()})),this.cureentTime(s)},cureentTime:function(t){var e=this;t.onTimeUpdate((function(n){for(var i=e.storelrcContent,s=0;s<i.length;s++){var r=i[s+1],c=t.currentTime.toFixed(3);if(r&&c>i[s][0]&&c<r[0]){if(e.currentIndex=s,s<3)return;e.itemId="scroll-"+String(i[s][0]).replace(".","-")}}}))},getMusicSrc:function(e){var n=this;this.$api.getSrc(e).then((function(i){var s=i.code,r=i.data;if(200===s){var c=r[0].url;c?n.audios(c,e):t.showToast({title:"此歌曲暂不能播放",icon:"none"})}}))},getDesc:function(t){var e=this;this.$api.getDesc(t).then((function(t){var n=t.code,i=t.lrc;if(200===n){var s=i.lyric,r=e.sliceNull(e._disposeLrc(s));e.storelrcContent=r}else e.lrc="暂时没有歌词噢"}))},_disposeLrc:function(t){var e=[],n=t.split("\n"),i=/\[\d{2}:\d{2}.\d{2,3}\]/g;while(!i.test(n[0]))n=n.slice(1);return 0===n[n.length-1].length&&n.pop(),n.forEach((function(t,n,s){var r=t.match(i),c=t.replace(i,"");r.forEach((function(t,n,i){var s=t.slice(1,-1).split(":");e.push([60*parseInt(s[0],10)+parseFloat(s[1]),c])}))})),e.sort((function(t,e){return t[0]-e[0]})),e},sliceNull:function(t){for(var e=[],n=0;n<t.length;n++)""==t[n][1]||e.push(t[n]);return e},tapStatus:function(){"play"===this.palyStatus?(this.audioObj.play(),this.palyStatus="stop"):(this.audioObj.pause(),this.palyStatus="play")},selected:function(t){this.audioObj.stop(),this.getMusicSrc(t.musicId),this.musicItem=t,this.offset=1},scrolltolower:function(){this.offset++}}};e.default=r}).call(this,n("543d")["default"])},a820:function(t,e,n){"use strict";n.r(e);var i=n("ec34"),s=n("00cb");for(var r in s)"default"!==r&&function(t){n.d(e,t,(function(){return s[t]}))}(r);n("4e27");var c,o=n("f0c5"),u=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],c);e["default"]=u.exports},e005:function(t,e,n){},ec34:function(t,e,n){"use strict";var i={navbar:function(){return n.e("components/navbar/navbar").then(n.bind(null,"d040"))}},s=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.storelrcContent,(function(e,n){var i=t.disposeId(e);return{$orig:t.__get_orig(e),m0:i}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},r=[];n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))}},[["595c","common/runtime","common/vendor"]]]);